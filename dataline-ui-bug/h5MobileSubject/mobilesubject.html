<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0;" name="viewport"/>
    <meta content="yes" name="apple-mobile-web-app-capable"/>
    <meta content="black" name="apple-mobile-web-app-status-bar-style"/>
    <meta content="telephone=no" name="format-detection"/>
    <title>时尚雷达</title>
    <link href="https://cdn.bootcss.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" type="text/css"/>
    <link href="mobilesubject.css" rel="stylesheet" type="text/css"/>
    <script src="rem.min.js" type="text/javascript"></script>
</head>
<body>
<div class="content">
    <div class="head-textone">爆款探测器</div>
    <div class="head-texttwo">选出你心中的最佳爆款</div>
    <div class="select-title">
        <button class="btn-index">第1/25题</button>
        <span style="margin-left: 1rem">在选项中,选择你认为销量最高的商品</span>
    </div>
    <div class="row-img">
        <div class="img-content" style="float: left">
            <img id="img-A" class="img-clothes" src="https://ruhnnwebpic.oss-cn-hangzhou.aliyuncs.com/instagram/20482571_160411717840949_1030992597163704320_n.jpg?x-oss-process=image/resize,w_145/format,webp"/>
            <div class="option">A</div>
        </div>
        <div class="img-content" style="float: right">
            <img class="img-clothes" id="img-B" src="https://ruhnnwebpic.oss-cn-hangzhou.aliyuncs.com/instagram/20482571_160411717840949_1030992597163704320_n.jpg?x-oss-process=image/resize,w_145/format,webp"/>
            <div class="option">B</div>
        </div>
    </div>
    <div class="row-img-two">
        <div class="img-content" style="float: left">
            <img id="img-C" class="img-clothes" src="https://ruhnnwebpic.oss-cn-hangzhou.aliyuncs.com/instagram/20482571_160411717840949_1030992597163704320_n.jpg?x-oss-process=image/resize,w_145/format,webp"/>
            <div class="option">C</div>
        </div>
        <div class="img-content" style="float: right">
            <img id="img-D" class="img-clothes" src="https://ruhnnwebpic.oss-cn-hangzhou.aliyuncs.com/instagram/20482571_160411717840949_1030992597163704320_n.jpg?x-oss-process=image/resize,w_145/format,webp"/>
            <div class="option">D</div>
        </div>
    </div>

     <div class="btn-content"><button class="next-btn" onclick="nextSubject(this)">下一题</button></div>
     <div class="font-text">选项对应得分为4、3、2、0,选项在本题中销量越高,得分越高</div>
</div>
</body>
<script src="https://cdn.bootcss.com/jquery/3.2.1/jquery.min.js" type="text/javascript"></script>
<script src="https://cdn.bootcss.com/bootstrap/3.3.7/js/bootstrap.min.js" type="text/javascript"></script>
<script>
    var dataList=[],count=0,scoreArray=[],win=window,tempData={};
    $(document).ready(function(){
        console.log("renmmm",docEl.style.fontSize)
        localStorage.clear();
        $.ajax({
            url:"http://116.62.146.25:8082/product-list/questions",
            type: 'GET',
            dataType: 'json',
            success: function(data) {
                if(data.code===10000){
                    dataList=data.data;
                    $(".btn-index").text("第"+(count+1)+"/25"+"题")
                    $("#img-A").attr("src", dataList[count][0].url+"_160x160.jpg")
                    $("#img-A").attr("data-score", dataList[count][0].score)
                    $("#img-B").attr("src", dataList[count][1].url+"_160x160.jpg")
                    $("#img-B").attr("data-score", dataList[count][1].score)
                    $("#img-C").attr("src", dataList[count][2].url+"_160x160.jpg")
                    $("#img-C").attr("data-score", dataList[count][2].score)
                    $("#img-D").attr("src", dataList[count][3].url+"_160x160.jpg")
                    $("#img-D").attr("data-score", dataList[count][3].score)
                    console.log("data",dataList,dataList[count][0].url)
                }else {
                    dataList=[]
                    alert("接口返回code错误")
                }
            },
            error: function() {
                alert("接口返回错误")
            }
        });
    });
    $(".img-content").click(function(e){
        console.log("e",e.target.id)
        var score=0,newScoreObj={};
        $(".img-clothes").css({"-webkit-transition":"initial","border":"initial","-webkit-box-shadow":"initial"});
        $(".next-btn").removeClass("next-btn").addClass("next-btn-highlight")
        switch (e.target.id){
            case "img-A":
                console.log("匹配了",$("#img-A"))
                $("#img-A").css({"-webkit-transition":"border linear .2s,-webkit-box-shadow linear .5s","border":"4px solid rgba(141,39,142,.75)","-webkit-box-shadow":"0 0 18px rgba(111,1,32,3)"});
                score=parseInt($("#img-A").attr("data-score"));
                break;
            case "img-B":
                $("#img-B").css({"-webkit-transition":"border linear .2s,-webkit-box-shadow linear .5s","border":"4px solid rgba(141,39,142,.75)","-webkit-box-shadow":"0 0 18px rgba(111,1,32,3)"});
                score=parseInt($("#img-B").attr("data-score"));
                break;
            case "img-C":
                $("#img-C").css({"-webkit-transition":"border linear .2s,-webkit-box-shadow linear .5s","border":"4px solid rgba(141,39,142,.75)","-webkit-box-shadow":"0 0 18px rgba(111,1,32,3)"});
                score=parseInt($("#img-C").attr("data-score"));
                break;
            case "img-D":
                $("#img-D").css({"-webkit-transition":"border linear .2s,-webkit-box-shadow linear .5s","border":"4px solid rgba(141,39,142,.75)","-webkit-box-shadow":"0 0 18px rgba(111,1,32,3)"});
                score=parseInt($("#img-D").attr("data-score"));
                break;
        }
        newScoreObj["index"]=count;
        newScoreObj["itmeScore"]=score;
        console.log("score",score)
        tempData=newScoreObj;
    });
    function nextSubject(self) {
        console.log("count",count)
        scoreArray.push(tempData)
        console.log("点击下一题scoreArray",scoreArray)
        if($(self).attr("class")=="next-btn-highlight"){
            console.log("scoreArray",scoreArray)
            $(".img-clothes").css({"-webkit-transition":"initial","border":"initial","-webkit-box-shadow":"initial"});
            if(count===23){
                $(".next-btn-highlight").text("查看得分")
                $(".next-btn-highlight").removeClass("next-btn-highlight").addClass("next-btn");
                ++count;
                $(".btn-index").text("第"+(count+1)+"/25"+"题")
                $("#img-A").attr("src", dataList[count][0].url+"_160x160.jpg")
                $("#img-A").attr("data-score", dataList[count][0].score)
                $("#img-B").attr("src", dataList[count][1].url+"_160x160.jpg")
                $("#img-B").attr("data-score", dataList[count][1].score)
                $("#img-C").attr("src", dataList[count][2].url+"_160x160.jpg")
                $("#img-C").attr("data-score", dataList[count][2].score)
                $("#img-D").attr("src", dataList[count][3].url+"_160x160.jpg")
                $("#img-D").attr("data-score", dataList[count][3].score)
                console.log("count",count)
            }else if(count===24){
                win.location.href="viewscore.html";
                localStorage.scoreArray=JSON.stringify(scoreArray);
            }else {
                $(".next-btn-highlight").removeClass("next-btn-highlight").addClass("next-btn");
                ++count;
                $(".btn-index").text("第"+(count+1)+"/25"+"题")
                console.log("dataList[count]",dataList[count])
                $("#img-A").attr("src", dataList[count][0].url+"_160x160.jpg")
                $("#img-A").attr("data-score", dataList[count][0].score)
                $("#img-B").attr("src", dataList[count][1].url+"_160x160.jpg")
                $("#img-B").attr("data-score", dataList[count][1].score)
                $("#img-C").attr("src", dataList[count][2].url+"_160x160.jpg")
                $("#img-C").attr("data-score", dataList[count][2].score)
                $("#img-D").attr("src", dataList[count][3].url+"_160x160.jpg")
                $("#img-D").attr("data-score", dataList[count][3].score)
            }

        }else {
            alert("未选择图片不能点击哦")
        }


    }
</script>
</html>